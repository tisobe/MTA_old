<!DOCTYPE html>

<html>

<head>
<link rel="stylesheet" type="text/css" href="https://cxc.cfa.harvard.edu/mta_days/mta_script_list/house_keeping/style_sheet.css" />
<style>
    th{padding:5px;text-align:left}
</style>

<title>Envelope Trending</title>

<script>
<!-- none -->
</script>

</head>

<body>

<!-- ######################## -->
<!-- begining of the document -->
<!-- ######################## -->


<h2>Envelope Trending</h2>

<h3>Description</h3>
<p>
<!-- here you need to put what is the purpose of this script. -->
This sets of scripts estimate envelopes around the data for a given msid, and estimate approximate date of
a yellow limit violation, if it happens in the next 10 yrs.
</p>

<h3>Location of Scripts and Their Names</h3>

<p>
<!-- physical location of the files -->
<b>Location</b>:<br />
/data/mta/Script/Envelope_trending/
<br />


</p>
<p>
<!-- if you uploaded to gibhub, please put the address of github  -->
<b>GitHub Address</b>: not uploaded yet
</p>


<table border=0>
<tr><td>classify_violation.py</td>              <td>Jun 22, 2016</td></tr>
<tr><td>create_html_page.py</td>                <td>Jul 01, 2016</td></tr>
<tr><td>envelope_common_function.py</td>        <td>Jul 01, 2016</td></tr>
<tr><td>glimmon_sql_read.py</td>                <td>Jul 01, 2016</td></tr>
<tr><td>read_mta_limits_db.py</td>              <td>Jun 16, 2016</td></tr>
<tr><td>update_database.py</td>                 <td>Jun 27, 2016</td></tr>
<tr><td>update_sub_html_pages.py</td>           <td>Jun 27, 2016</td></tr>
<tr><td>violation_estimate_data.py</td>         <td>Jun 27, 2016</td></tr>
<tr><td>envelope_trending_main_script</td>      <td>Jan.27, 2016</td></tr>
<tr><td>envelope_trending_wrap_script</td>      <td>Jru 21, 20.9</td></tr>
</table>

<p>
<!--  here you put a short description of scripts or README file location.-->
Please read README file for more details.
/data/mta/Script/Envelope_trending/Scripts/README
</p>
<table border = 0>
<tr><th>Jun 27, 2016</th><td>Initially logged</td></tr>
<tr><th>Jul 01, 2016</th><td>Special case treatment/Unit conversion corrections</td></tr>
</table>



<h3>Data Needed</h3>
<!--- a list of input data --->

<ul>
    <li> a fits file extracted by dataseeker for a given msids </li>
    <li> http://occweb.cfa.harvard.edu/occweb/FOT/engineering/thermal/AXAFAUTO_RSYNC/G_LIMMON_Archive/glimmondb.sqlite3</li>
    <li>/data/mta4/MTA/data/op_limits/op_limits.db</li>
    <li>/data/mta4/Deriv/comp*.fits</li>
    <li>/data/mta4/Deriv/grad*.fits</li>
    <li>/data/mta4/Deriv/hrc*_*.fits</li>
</ul>

<h3>Environment Setting</h3>
<!-- describe the environment setting -->
<ul>
    <li>The all script must be accessible to  /proj/sot/ska/bin/python</li>
</ul>

<h3>Output Locations and File Names</h3>
<!-- describe the output location and the file names -->
<ul>
<li>
output location1
    <ul>
        <li> /data/mta/Script/Envelope_trending/Data/&lt;msid&gt;_data</li>
        <li> /data/mta/Script/Envelope_trending/house_keeping/v_table.sqlite3</li>
    </ul>
</li>
<li>
output location2
    <ul>
        <li>/data/mta_www/mta_envelope_trending/envelope_main.html</li>
        <li>/data/mta_www/mta_envelope_trending/Htmls/&lt;msid&gt;_plot.html</li>
        <li>/data/mta_www/mta_envelope_trending/Htmls/Limit_table/&lt;msid&gt;_limit_table.html</li>
        <li>/data/mta_www/mta_envelope_trending/Htmls/Future/&lt;msid&gt;_&lt;loc&gt;</li>
    </ul>
</li>
</ul>


<h3>How to Run the Script(s)</h3>
<!-- describe how to run all scripts. start from environmental setting -->
<ol> 
    <li> go to: cd /data/mta/Script/Envelope_trending/Exc </li>
    <li> run:   /data/mta/Script/Envelope_trending/Scripts/update_database.py </li>
    <li> run:   /data/mta/Script/Envelope_trending/Scripts/create_html_page.py</li>
    <li> run:   /data/mta/Script/Envelope_trending/Scripts/classify_violation.py</li>
    <li> run:   /data/mta/Script/Envelope_trending/Scripts/update_sub_html_pages.py</li>
</ol>


<h3>How to Run Test(s)</h3>
<!-- describe how to run test. start from environmental setting -->
<ol> 
    <li> not all scripts have test mode, check each script for the test mode</li>
</ol>

<div style='padding-left:20px'>
<h4>Expected result from the test</h4>
<!-- describe what we should see when we run the test -->
<p>
None
</p>




</div>

<h3>Cron Job</h3>
<table border= 0>
<tr><th>CPU: </th><td>r2d2-v</td></tr>
<tr><th>User: </th><td>mta</td></tr>
</table>
<p>
0 1 3,13,23 * * cd /data/mta/Script/Envelope_trending/Exc; /data/mta/Script/Envelope_trending/Scripts/envelope_trending_wrap_script > $HOME/Logs/envelope_trending.cron
</p>


<h3>Web Addreess</h3>
<p>
<a href='https://cxc.cfa.harvard.edu/mta_days/mta_envelope_trending/envelope_main.html'>
https://cxc.cfa.harvard.edu/mta_days/mta_envelope_trending/envelope_main.html
</a>
</p>


<h3>Note</h3>

<p>
<!-- describe any other concern / instructions -->
</p>
Some of the data are missing (mainly mta comp) and has big gaps.
<h3>Future Plan/Update Schedule</h3>
<p>
<!-- please describe update plan etc yere -->
more test modes will be added
</p>

<!-- the end of the document -->

<div  style='padding-top:10px'>
</div>
<hr />
<div  style='padding-top:10px'>
</div>

<a href='https://cxc.cfa.harvard.edu/mta_days/mta_script_list/mta_script_list.html'>
Back to Top Page
</a>













</body>
</html>
